<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Ingresos vs Gastos</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Tipografía Nunito -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --azul-ingresos:#4338CA;   /* azul fuerte */
      --morado-gastos:#8B5CF6;   /* morado medio */
      --morado-suave:#C4B5FD;    /* morado claro */
      --ink:#0F172A;
      --muted:#64748B;
      --bg:#FFFFFF;
      --border:#E5E7EB;
    }

    body {
      margin: 0;
      font-family: 'Greycliff CF', sans-serif;
      background: transparent;
    }

    .bloque-linea {
      background: var(--bg);
      padding: 1.5rem;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.04);
    }

    canvas {
      width: 100%;
      max-height: 280px;
    }

    /* Título */
    .titulo-grafico {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      gap: .5rem;
    }

    .titulo-grafico h2 {
      font-size: 1.25rem;
      margin: 0;
      color: var(--ink);
    }

    /* Tooltip “i” */
    .info-icon {
      position: relative;
      cursor: pointer;
    }

    .circle-i {
      display: inline-block;
      width: 18px;
      height: 18px;
      background: #e2e8f0;
      color: #334155;
      font-size: 12px;
      font-weight: bold;
      text-align: center;
      line-height: 18px;
      border-radius: 50%;
    }

    .info-tooltip {
      position: absolute;
      top: 130%;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 230px;
      opacity: 0;
      pointer-events: none;
      transition: .2s;
      font-size: .75rem;
      color: var(--ink);
    }

    .info-icon:hover .info-tooltip {
      opacity: 1;
      pointer-events: auto;
    }
  </style>
</head>

<body>
<div class="bloque-linea">

  <div class="titulo-grafico">
    <h2>Ingresos vs Gastos</h2>

    <span class="info-icon">
      <span class="circle-i">i</span>
      <div class="info-tooltip">
        Comparación directa entre ingresos y gastos durante el periodo.<br>
        Idealmente la barra azul (ingresos) debe ser mayor a la morada (gastos).
      </div>
    </span>
  </div>

  <canvas id="barrasHorizontales"></canvas>
</div>

<script>
  const ctx = document.getElementById('barrasHorizontales').getContext('2d');

  // Datos de ejemplo: reemplaza por los que vengan de tu app
  const ingresosMensuales = [3200,4100,3700,4600,4200,5000,5400,5000,4800,4600,4900,5100];
  const gastosMensuales   = [2800,3900,4000,4700,4400,5100,5600,5200,5000,4700,4950,5300];

  const totalIngresos = ingresosMensuales.reduce((a,b)=>a+b,0);
  const totalGastos   = gastosMensuales.reduce((a,b)=>a+b,0);

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Ingresos','Gastos'],
      datasets: [{
        label: 'Monto',
        data: [totalIngresos, totalGastos],
        backgroundColor: ['#4338CA', '#8B5CF6'], // azul y morado
        borderColor: ['#4338CA', '#8B5CF6'],
        borderWidth: 2,
        borderRadius: 12,
        barThickness: 44
      }]
    },
    options: {
      indexAxis: 'y', // barras horizontales
      responsive: true,
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#ffffff',
          titleColor: '#64748B',
          bodyColor: '#0F172A',
          borderColor: '#E5E7EB',
          borderWidth: 1,
          padding: 10,
          callbacks: {
            label: (context) => {
              const valor = context.raw || 0;
              return `$${valor.toLocaleString()}`;
            }
          }
        }
      },
      scales: {
        x: {
          grid: { display: false },
          ticks: { color: '#64748B' }
        },
        y: {
          grid: { display: false },
          ticks: { color: '#4338CA' } // etiqueta en azul como el ejemplo
        }
      }
    }
  });
</script>

</body>
</html>
